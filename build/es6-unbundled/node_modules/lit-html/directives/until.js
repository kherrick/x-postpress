define(["exports","../lib/parts.js","../lit-html.js"],function(_exports,_parts,_litHtml){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.until=void 0;const _state=new WeakMap,until=(0,_litHtml.directive)((...args)=>part=>{let state=_state.get(part);if(state===void 0){state={values:[]};_state.set(part,state)}const previousValues=state.values;let changedSinceLastRender=!1;state.values=args;for(let i=0;i<args.length;i++){const value=args[i];if(value===previousValues[i]&&!changedSinceLastRender){continue}changedSinceLastRender=!0;if((0,_parts.isPrimitive)(value)||"function"!==typeof value.then){part.setValue(value);state.lastRenderedIndex=i;break}state.lastRenderedIndex=void 0;Promise.resolve(value).then(resolvedValue=>{const index=state.values.indexOf(value);if(-1<index&&(state.lastRenderedIndex===void 0||index<state.lastRenderedIndex)){state.lastRenderedIndex=index;part.setValue(resolvedValue);part.commit()}})}});_exports.until=until});