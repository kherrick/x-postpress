define(["exports","../utils/boot.js","../utils/resolve-url.js","../utils/settings.js"],function(_exports,_boot,_resolveUrl,_settings){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.DomModule=void 0;let modules={},lcModules={};function setModule(id,module){modules[id]=lcModules[id.toLowerCase()]=module}function findModule(id){return modules[id]||lcModules[id.toLowerCase()]}function styleOutsideTemplateCheck(inst){if(inst.querySelector("style")){console.warn("dom-module %s has style outside template",inst.id)}}class DomModule extends HTMLElement{static get observedAttributes(){return["id"]}static import(id,selector){if(id){let m=findModule(id);if(m&&selector){return m.querySelector(selector)}return m}return null}attributeChangedCallback(name,old,value,namespace){if(old!==value){this.register()}}get assetpath(){if(!this.__assetpath){const owner=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,url=(0,_resolveUrl.resolveUrl)(this.getAttribute("assetpath")||"",owner.baseURI);this.__assetpath=(0,_resolveUrl.pathFromUrl)(url)}return this.__assetpath}register(id){id=id||this.id;if(id){if(_settings.strictTemplatePolicy&&findModule(id)!==void 0){setModule(id,null);throw new Error(`strictTemplatePolicy: dom-module ${id} re-registered`)}this.id=id;setModule(id,this);styleOutsideTemplateCheck(this)}}}_exports.DomModule=DomModule;DomModule.prototype.modules=modules;customElements.define("dom-module",DomModule)});