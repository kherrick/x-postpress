import{TemplateResult}from"../lit-html/lit-html.js";import{render}from"../lit-html/lib/shady-render.js";import{UpdatingElement,JSCompiler_renameProperty}from"./lib/updating-element.js";export*from"./lib/updating-element.js";export*from"./lib/decorators.js";export{html,svg,TemplateResult,SVGTemplateResult}from"../lit-html/lit-html.js";import{supportsAdoptingStyleSheets}from"./lib/css-tag.js";export*from"./lib/css-tag.js";function arrayFlat(styles,result=[]){for(let i=0,length=styles.length;i<length;i++){const value=styles[i];if(Array.isArray(value)){arrayFlat(value,result)}else{result.push(value)}}return result}const flattenStyles=styles=>styles.flat?styles.flat(1/0):arrayFlat(styles);export class LitElement extends UpdatingElement{static get _uniqueStyles(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_styles",this))){if(!this.hasOwnProperty(JSCompiler_renameProperty("styles",this))){this._styles=this._styles!==void 0?this._styles:[]}else{const userStyles=this.styles;if(Array.isArray(userStyles)){const styles=flattenStyles(userStyles),styleSet=styles.reduceRight((set,s)=>{set.add(s);return set},new Set);this._styles=[];styleSet.forEach(v=>this._styles.unshift(v))}else{this._styles=userStyles?[userStyles]:[]}}}return this._styles}initialize(){super.initialize();this.renderRoot=this.createRenderRoot();if(window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot){this.adoptStyles()}}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const styles=this.constructor._uniqueStyles;if(0===styles.length){return}if(window.ShadyCSS!==void 0&&!window.ShadyCSS.nativeShadow){window.ShadyCSS.ScopingShim.prepareAdoptedCssText(styles.map(s=>s.cssText),this.localName)}else if(supportsAdoptingStyleSheets){this.renderRoot.adoptedStyleSheets=styles.map(s=>s.styleSheet)}else{this._needsShimAdoptedStyleSheets=!0}}connectedCallback(){super.connectedCallback();if(this.hasUpdated&&window.ShadyCSS!==void 0){window.ShadyCSS.styleElement(this)}}update(changedProperties){super.update(changedProperties);const templateResult=this.render();if(templateResult instanceof TemplateResult){this.constructor.render(templateResult,this.renderRoot,{scopeName:this.localName,eventContext:this})}if(this._needsShimAdoptedStyleSheets){this._needsShimAdoptedStyleSheets=!1;this.constructor._uniqueStyles.forEach(s=>{const style=document.createElement("style");style.textContent=s.cssText;this.renderRoot.appendChild(style)})}}render(){}}LitElement.finalized=!0;LitElement.render=render;