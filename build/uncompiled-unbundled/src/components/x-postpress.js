var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=3>c?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;0<=i;i--)if(d=decorators[i])r=(3>c?d(r):3<c?d(target,key,r):d(target,key))||r;return 3<c&&r&&Object.defineProperty(target,key,r),r};import{getPosts,getPostsUrl}from"../utilities/misc.js";import{LitElement,property,html,TemplateResult}from"../../node_modules/lit-element/lit-element.js";import articles,{getErrorMessageArticle,loading}from"../templates/articles/articles.js";import styles from"../templates/styles/x-postpress.js";class xPostpress extends LitElement{constructor(){super();this.apiHost="https://content.example.com";this.apiPath="/wp-json/wp/v2";this.categories="";this.include="";this.page="";this.per_page="";this.tags="";this.search="";this.slug="";this.urlAttributes=["apiHost","apiPath"];this.builtQueryStringAttributes=["categories","include","page","per_page","search","slug","tags"];this.didGetPosts=!1;this.articles=loading}requestPosts(){const postsUrl=getPostsUrl({apiHost:this.apiHost,apiPath:this.apiPath,categories:this.categories,include:this.include,page:this.page,per_page:this.per_page,search:this.search,slug:this.slug,tags:this.tags},this.builtQueryStringAttributes);getPosts(postsUrl).then(res=>articles(res)).catch(err=>getErrorMessageArticle(err)).then(articles=>{this.didGetPosts=!0;this.articles=articles})}firstUpdated(){this.requestPosts()}updated(changedProperties){if(this.didGetPosts){const shouldGetPostsAttributes=[...this.urlAttributes,...this.builtQueryStringAttributes],props=changedProperties.keys();let prop=props.next();while(!prop.done){if(-1!==shouldGetPostsAttributes.indexOf(prop.value)){this.requestPosts();break}prop=props.next()}}}render(){return html`
      ${styles}<slot name="articles"></slot>${this.articles}
    `}}__decorate([property({type:String,reflect:!0})],xPostpress.prototype,"apiHost",void 0);__decorate([property({type:String,reflect:!0})],xPostpress.prototype,"apiPath",void 0);__decorate([property({type:String,reflect:!0})],xPostpress.prototype,"categories",void 0);__decorate([property({type:String,reflect:!0})],xPostpress.prototype,"include",void 0);__decorate([property({type:String,reflect:!0})],xPostpress.prototype,"page",void 0);__decorate([property({type:String,reflect:!0})],xPostpress.prototype,"per_page",void 0);__decorate([property({type:String,reflect:!0})],xPostpress.prototype,"tags",void 0);__decorate([property({type:String,reflect:!0})],xPostpress.prototype,"search",void 0);__decorate([property({type:String,reflect:!0})],xPostpress.prototype,"slug",void 0);__decorate([property({type:Boolean})],xPostpress.prototype,"urlAttributes",void 0);__decorate([property({type:Array})],xPostpress.prototype,"builtQueryStringAttributes",void 0);__decorate([property({type:Boolean})],xPostpress.prototype,"didGetPosts",void 0);__decorate([property({type:TemplateResult})],xPostpress.prototype,"articles",void 0);window.customElements.define("x-postpress",xPostpress);