import{formatDate as t}from"./formatDate.js";function e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function n(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}var i,r,s,a,o,l,p;const h="<style>\n  a,\n  a:link,\n  a:visited {\n    color: var(--x-postpress-a-color);\n    text-decoration: var(--x-postpress-a-text-decoration);\n  }\n\n  a:hover {\n    text-decoration: var(--x-postpress-a-hover-text-decoration);\n  }\n\n  a,\n  a:link,\n  a:visited {\n    color: var(--x-postpress-a-color);\n    text-decoration: var(--x-postpress-a-text-decoration);\n  }\n\n  a:hover {\n    text-decoration: var(--x-postpress-a-hover-text-decoration);\n  }\n\n  article,\n  ::slotted(article) {\n    clear: var(--x-postpress-article-clear, inherit);\n    margin: var(--x-postpress-article-margin, inherit);\n    width: var(--x-postpress-article-width, 80%);\n  }\n\n  article .gallery {\n    display: var(--x-postpress-article-gallery-display, inherit);\n    flex-wrap: wrap;\n  }\n\n  article .gallery-item {\n    align-items: center;\n    display: flex;\n    flex-direction: column;\n    flex: var(--x-postpress-article-gallery-item-flex, inherit);\n    justify-content: flex-start;\n    line-height: 1;\n    margin: var(--x-postpress-article-gallery-item-margin, inherit);\n    padding: var(--x-postpress-article-gallery-item-padding, inherit);\n  }\n\n  article .gallery-columns-2 .gallery-item {\n    flex-basis: 43.3%;\n    padding: var(--x-postpress-article-gallery-item-2col-padding, 5%);\n  }\n\n  article .gallery-columns-3 .gallery-item {\n    flex-basis: 23.3%;\n    padding: var(--x-postpress-article-gallery-item-3col-padding, 5%);\n  }\n\n  article .gallery-icon {\n    padding: 0 0.25rem 0 0.25rem;\n  }\n\n  .alignleft {\n    float: left;\n    margin: 0;\n  }\n\n  .alignright {\n    float: right;\n    margin: 0;\n  }\n\n  figure {\n    margin: 0;\n    padding: 0 0.25rem 0 0.25rem;\n  }\n\n  figure.alignleft {\n    padding: 0 1rem 0 0;\n  }\n\n  figure > figcaption {\n    font-size: smaller;\n    min-height: 2rem;\n    text-align: center;\n  }\n\n  h1 {\n    color: var(--x-postpress-h1-color, inherit);\n    font-size: var(--x-postpress-h1-font-size, inherit);\n    font-weight: var(--x-postpress-h1-font-weight, inherit);\n    margin: var(--x-postpress-h1-margin, inherit);\n    text-align: var(--x-postpress-h1-text-align, initial);\n  }\n\n  h1 a, h1 a:visited, h1 a:link, h1 a:hover {\n    text-decoration: none;\n  }\n\n  h2 {\n    color: var(--x-postpress-h2-color, #777);\n    display: var(--x-postpress-h2-display, initial);\n    font-size: var(--x-postpress-h2-font-size, smaller);\n    text-align: var(--x-postpress-h2-text-align, initial);\n  }\n\n  hr {\n    clear: var(--x-postpress-hr-clear, both);\n    display: var(--x-postpress-hr-display, block);\n    margin: var(--x-postpress-hr-margin, initial);\n    padding: var(--x-postpress-hr-padding, initial);\n  }\n\n  .wp-block-gallery img {\n    display: var(--x-postpress-wp-block-gallery-img-display, inherit);\n    float: var(--x-postpress-wp-block-gallery-img-float, inherit);\n    height: var(--x-postpress-wp-block-gallery-img-height, auto);\n    margin: var(--x-postpress-wp-block-gallery-img-margin, inherit);\n    max-height: var(--x-postpress-wp-block-gallery-img-max-height, inherit);\n    max-width: var(--x-postpress-wp-block-gallery-img-max-width, inherit);\n    min-height: var(--x-postpress-wp-block-gallery-img-min-height, inherit);\n    min-width: var(--x-postpress-wp-block-gallery-img-min-width, inherit);\n    padding: var(--x-postpress-wp-block-gallery-img-padding, inherit);\n    width: var(--x-postpress-wp-block-gallery-img-width, auto);\n  }\n\n  img {\n    display: var(--x-postpress-img-display, inherit);\n    float: var(--x-postpress-img-float, inherit);\n    height: var(--x-postpress-img-height, auto);\n    margin: var(--x-postpress-img-margin, inherit);\n    max-height: var(--x-postpress-img-max-height, inherit);\n    max-width: var(--x-postpress-img-max-width, inherit);\n    min-height: var(--x-postpress-img-min-height, inherit);\n    min-width: var(--x-postpress-img-min-width, inherit);\n    padding: var(--x-postpress-img-padding, inherit);\n    width: var(--x-postpress-img-width, auto);\n  }\n\n  ul {\n    display: var(--x-postpress-ul-display, inherit);\n    list-style-type: var(--x-postpress-ul-list-style-type, inherit);\n    margin: var(--x-postpress-ul-margin, inherit);\n    padding: var(--x-postpress-ul-padding, inherit);\n  }\n\n  li {\n    display: var(--x-postpress-li-display, inherit);\n    margin: var(--x-postpress-li-margin, inherit);\n    padding: var(--x-postpress-li-padding, inherit);\n  }\n\n  p {\n    clear: var(--x-postpress-p-clear, inherit);\n    text-align: var(--x-postpress-p-text-align, inherit);\n  }\n\n  pre {\n    overflow: auto;\n  }\n\n  x-postpress-code {\n    margin: 1rem 0;\n  }\n</style>\n";class d extends HTMLElement{constructor(){super(),i.set(this,!1),r.set(this,!1),s.set(this,""),a.set(this,""),o.set(this,""),l.set(this,"html"),p.set(this,"")}set postDate(i){var r;const a=null===(r=this.shadowRoot)||void 0===r?void 0:r.querySelector("h2");a&&e(this,s)!==i&&(a.textContent=t(`${i}`),n(this,s,i))}get postDate(){return e(this,s)}set postLink(t){var i;const r=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("h1 > a");r&&e(this,a)!==t&&(r.setAttribute("href",`${t}`),n(this,a,t))}get postLink(){return e(this,a)}set postTitle(t){var i;const r=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("h1 > a");r&&e(this,o)!==t&&(r.textContent=`${t}`,n(this,o,t))}get postTitle(){return e(this,o)}set type(t){if(t)return n(this,l,t),void this.setAttribute("type",t);n(this,l,void 0),this.removeAttribute("type")}get type(){return this.getAttribute("type")}set url(t){if(t)return n(this,p,t),void this.setAttribute("url",t);n(this,p,void 0),this.removeAttribute("url")}get url(){return this.getAttribute("url")}static get observedAttributes(){return["type","url"]}connectedCallback(){this.attachInternals().shadowRoot||this.shadowRoot||(this.attachShadow({mode:"open"}),n(this,r,!0))}createArticle(e,n,i,r){const s=document.createElement("h1"),a=document.createElement("a"),o=document.createElement("h2"),l=document.createElement("article"),p=document.createElement("hr");return a.setAttribute("href",n),a.innerHTML=i,s.append(a),o.textContent=t(r),l.innerHTML=JSON.parse(JSON.stringify(e)),l.prepend(o),l.prepend(s),l.append(p),l}attributeChangedCallback(t,e,i){if(null!==i){switch(t){case"url":n(this,p,i);break;case"type":n(this,l,i)}this.url&&"html"===this.type&&this.fetchHTMLTemplate(this.url).then((t=>{var e;const n=null==t?void 0:t.querySelector("article"),i=n.querySelector("h1 > a");this.postTitle=null==i?void 0:i.textContent,this.postLink=null==i?void 0:i.getAttribute("href"),this.postDate=null===(e=n.querySelector("h2"))||void 0===e?void 0:e.textContent,this.render(`\n          ${h}\n          ${n.outerHTML}\n        `,!0)})),this.url&&"json"===this.type&&this.fetchJSONPayload(this.url).then((({content:t,link:e,title:n,date:i})=>{this.postTitle=n,this.postLink=e,this.postDate=i,this.render(`\n          ${h}\n          ${this.createArticle(t,e,n,i).outerHTML}\n        `,!0)}))}}fetchJSONPayload(t){return fetch(`${t}`).then((t=>t.json())).then((t=>{var e,n,i,r,s,a;return{content:null===(n=null===(e=t[0])||void 0===e?void 0:e.content)||void 0===n?void 0:n.rendered,link:null===(i=t[0])||void 0===i?void 0:i.link,title:null===(s=null===(r=t[0])||void 0===r?void 0:r.title)||void 0===s?void 0:s.rendered,date:null===(a=t[0])||void 0===a?void 0:a.date}}))}fetchHTMLTemplate(t){return fetch(`${t}`).then((t=>t.text())).then((t=>(new DOMParser).parseFromString(t,"text/html")))}render(t,s=!1){if(!e(this,i)&&!0===s||!e(this,r)&&!e(this,i)){const e=document.createElement("template");e.innerHTML=t,this.shadowRoot&&(this.shadowRoot.appendChild(e.content.cloneNode(!0)),this.shadowRoot.dispatchEvent(new CustomEvent("x-postpress-render",{bubbles:!0,composed:!0})),n(this,i,!0))}}}i=new WeakMap,r=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,p=new WeakMap,customElements.get("x-postpress")||customElements.define("x-postpress",d);export{d as XPostpress,h as defaultStyles};
