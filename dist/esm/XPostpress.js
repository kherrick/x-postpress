import{_ as t}from"./tslib.es6-91ef4223.js";import{L as e,h as i,p as s,a as r}from"./lit-element-6721defd.js";import{getPostsUrl as o,getPosts as p}from"./misc.js";import"./article.js";import a,{loading as l,getErrorMessageArticle as h}from"./articles.js";import c from"./x-postpress.js";let n=class extends e{constructor(){super(),this.apiHost="",this.apiPath="/wp-json/wp/v2",this.removeArticleHeaderLinkSubDomain=!1,this.articleHeaderLinkSubDomain="",this.categories="",this.include="",this.page="",this.per_page="",this.tags="",this.search="",this.slug="",this.urlAttributes=["apiHost","apiPath"],this.builtQueryStringAttributes=["categories","include","page","per_page","search","slug","tags"],this.didGetPosts=!1,this.articles=l}requestPosts(){const t=o({apiHost:this.apiHost,apiPath:this.apiPath,categories:this.categories,include:this.include,page:this.page,per_page:this.per_page,search:this.search,slug:this.slug,tags:this.tags},this.builtQueryStringAttributes);p(t).then(t=>a(t,this.removeArticleHeaderLinkSubDomain,this.articleHeaderLinkSubDomain)).catch(t=>h(t)).then(t=>{this.didGetPosts=!0,this.articles=t})}firstUpdated(){this.apiHost&&this.requestPosts()}updated(t){if(this.didGetPosts&&this.apiHost){const e=[...this.urlAttributes,...this.builtQueryStringAttributes],i=t.keys();let s=i.next();for(;!s.done;){if(-1!==e.indexOf(s.value)){this.requestPosts();break}s=i.next()}}}render(){return i`
      <slot name="articles"></slot>
      ${this.apiHost&&this.articles}
    `}};n.styles=c,t([s({type:String,reflect:!0})],n.prototype,"apiHost",void 0),t([s({type:String,reflect:!0})],n.prototype,"apiPath",void 0),t([s({type:Boolean,reflect:!0})],n.prototype,"removeArticleHeaderLinkSubDomain",void 0),t([s({type:String,reflect:!0})],n.prototype,"articleHeaderLinkSubDomain",void 0),t([s({type:String,reflect:!0})],n.prototype,"categories",void 0),t([s({type:String,reflect:!0})],n.prototype,"include",void 0),t([s({type:String,reflect:!0})],n.prototype,"page",void 0),t([s({type:String,reflect:!0})],n.prototype,"per_page",void 0),t([s({type:String,reflect:!0})],n.prototype,"tags",void 0),t([s({type:String,reflect:!0})],n.prototype,"search",void 0),t([s({type:String,reflect:!0})],n.prototype,"slug",void 0),t([s({type:Array})],n.prototype,"urlAttributes",void 0),t([s({type:Array})],n.prototype,"builtQueryStringAttributes",void 0),t([s({type:Boolean})],n.prototype,"didGetPosts",void 0),t([s({type:Object,noAccessor:!1})],n.prototype,"articles",void 0);var d=n=t([r("x-postpress")],n);export default d;export{n as XPostpress};
